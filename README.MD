# WaiterApp v2

Sistema completo de gestÃ£o de restaurante com aplicaÃ§Ã£o web, mobile e API robusta para controle de pedidos, usuÃ¡rios e cardÃ¡pio.

![Logo do WaiterApp](./assets/cover.png)

## Tecnologias

### Backend
- **Fastify** - Framework web rÃ¡pido e eficiente
- **Prisma** - ORM moderno com type-safety
- **Zod** - ValidaÃ§Ã£o de schemas e types
- **PostgreSQL** - Banco de dados relacional
- **JWT** - AutenticaÃ§Ã£o e autorizaÃ§Ã£o
- **AWS S3** - Upload de imagens com presigned URLs

### Frontend Web
- **React** - Biblioteca de interface de usuÃ¡rio
- **TanStack Router** - Roteamento type-safe
- **Tailwind CSS** - Framework CSS utility-first
- **React Query** - Gerenciamento de estado servidor

### Mobile
- **React Native** - Framework mobile multiplataforma
- **Expo** - Plataforma de desenvolvimento
- **StyleSheet** - EstilizaÃ§Ã£o nativa

## Funcionalidades

### AutenticaÃ§Ã£o e UsuÃ¡rios
- Login com email e senha
- Registro de garÃ§ons (apenas admins)
- EdiÃ§Ã£o e exclusÃ£o de usuÃ¡rios
- RecuperaÃ§Ã£o de senha via email
- Refresh token automÃ¡tico
- Rate limiting para tentativas de login
- Criptografia de senhas com bcrypt

### GestÃ£o do CardÃ¡pio
- Cadastro de categorias com emoji
- Cadastro de ingredientes
- Cadastro de produtos com:
  - Nome, descriÃ§Ã£o e preÃ§o
  - Categoria associada
  - Ingredientes selecionados
  - Upload de imagem

### Pedidos
- CriaÃ§Ã£o de pedidos por mesa
- Status de pedido: Aguardando, Em ProduÃ§Ã£o, Finalizado
- Controle de quantidade

### Upload de Arquivos
- Presigned URLs para upload direto no S3
- Processamento via AWS Lambda
- OtimizaÃ§Ã£o automÃ¡tica de imagens

## Estrutura do Banco

### ERD (Entity Relationship Diagram)

```mermaid
erDiagram
    User ||--o{ Order : creates
    Category ||--o{ Product : contains
    Product }o--o{ Ingredient : has

    User {
        string id PK
        string name
        string email UK
        string password
        string type
        datetime created_at
    }

    Category {
        string id PK
        string name UK
        string emoji
        datetime createdAt
    }

    Ingredient {
        string id PK
        string name UK
        string emoji
        datetime createdAt
    }

    Product {
        string id PK
        string name
        string description
        decimal price
        string imageUrl
        string categoryId FK
    }

    Order {
        string id PK
        int table
        string status
        int quantity
    }
```

## Regras de NegÃ³cio

### UsuÃ¡rios
- Senhas criptografadas obrigatoriamente
- Apenas admins podem gerenciar garÃ§ons
- Rate limiting: mÃ¡ximo 5 tentativas de login por minuto
- Bloqueio temporÃ¡rio apÃ³s mÃºltiplas tentativas incorretas
- Recovery de senha via email com token temporÃ¡rio

### Produtos
- Categorias obrigatÃ³rias para produtos
- PreÃ§os com precisÃ£o decimal (10,2)
- Upload de imagens obrigatÃ³rio
- Ingredientes opcionais por produto

### Pedidos
- Mesa obrigatÃ³ria para identificaÃ§Ã£o
- Status padrÃ£o: "Em ProduÃ§Ã£o"
- Quantidade mÃ­nima: 1 item

## API Endpoints

### AutenticaÃ§Ã£o
```
POST /auth/login       # Login de usuÃ¡rio
POST /auth/refresh     # Renovar token
POST /auth/forgot      # Solicitar reset de senha
POST /auth/reset       # Resetar senha
```

### UsuÃ¡rios (Admin apenas)
```
POST /users            # Criar garÃ§om
GET /users             # Listar usuÃ¡rios
PUT /users/:id         # Editar usuÃ¡rio
DELETE /users/:id      # Deletar usuÃ¡rio
```

### CardÃ¡pio
```
GET /categories        # Listar categorias
POST /categories       # Criar categoria
PUT /categories/:id    # Editar categoria
DELETE /categories/:id # Deletar categoria

GET /ingredients       # Listar ingredientes
POST /ingredients      # Criar ingrediente
PUT /ingredients/:id   # Editar ingrediente
DELETE /ingredients/:id # Deletar ingrediente

GET /products          # Listar produtos
POST /products         # Criar produto
PUT /products/:id      # Editar produto
DELETE /products/:id   # Deletar produto
```

### Upload
```
POST /upload/presigned # Gerar URL de upload
```

### Pedidos
```
GET /orders            # Listar pedidos
POST /orders           # Criar pedido
PUT /orders/:id        # Atualizar pedido
DELETE /orders/:id     # Cancelar pedido
```

## Status do Projeto

### âœ… Implementado
- AutenticaÃ§Ã£o bÃ¡sica (login/logout)
- CRUD de usuÃ¡rios, categorias, ingredientes e produtos
- Estrutura do banco de dados
- APIs bÃ¡sicas do backend
- Interface web responsiva
- App mobile bÃ¡sico

### ğŸš§ Em Desenvolvimento
- Upload de arquivos com presigned URLs
- Sistema de refresh token
- Rate limiting e seguranÃ§a
- Recovery de senha
- Sistema de emails
- Funcionalidades avanÃ§adas de pedidos

### ğŸ“‹ PrÃ³ximas Funcionalidades
- Dashboard administrativo
- RelatÃ³rios de vendas
- NotificaÃ§Ãµes push
- Sistema de mesas
- IntegraÃ§Ã£o com impressoras
- Modo offline

## Estrutura de Pastas

```
waiterapp-v2/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ mobile/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/
â”‚   â””â”€â”€ package.json
â””â”€â”€ README.md
```

## LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT.